# react-day-02

## Try React

### åœ¨çº¿

React å¯ä»¥æ¸è¿›å¼ä½¿ç”¨äº†ï¼Œæ—¢å¯ä»¥ä¸ºç®€å•çš„ HTML é¡µé¢å¢åŠ äº¤äº’ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥æ­å»ºä¸€ä¸ªç”± React é©±åŠ¨çš„å¤æ‚åº”ç”¨ã€‚

React æ–‡æ¡£ä¸­åŒ…å«å¾ˆå¤šåœ¨çº¿ç¼–è¾‘&è¿è¡Œçš„ sandboxï¼Œäº¤äº’å¼å­¦ä¹ éå¸¸æœ‰æ„æ€

é™¤äº† React æ–‡æ¡£ä»¥å¤–ï¼Œä¹Ÿè¿˜æœ‰å¾ˆå¤šæ”¯æŒ React çš„åœ¨çº¿ä»£ç ç¼–è¾‘å™¨ï¼Œå¦‚ï¼šCodeSandboxã€StackBlitzã€CodePen ç­‰

ğŸ‘‰ [React åœ¨çº¿æ¼”ç»ƒåœº](https://zh-hans.react.dev/learn/installation#try-react)

### æœ¬åœ°

> æºç é“¾æ¥ï¼šhttps://gist.githubusercontent.com/gaearon/0275b1e1518599bbeafcde4722e79ed1/raw/db72dcbf3384ee1708c4a07d3be79860db04bff0/example.html

```html
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Hello World</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

    <!-- Don't use this in production: -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
    
      function MyApp() {
        return <h1>Hello, world!</h1>;
      }

      const container = document.getElementById('root');
      const root = ReactDOM.createRoot(container);
      root.render(<MyApp />);

    </script>
    <!--
      Note: this page is a great way to try React but it's not suitable for production.
      It slowly compiles JSX with Babel in the browser and uses a large development build of React.

      Read this page for starting a new React project with JSX:
      https://react.dev/learn/start-a-new-react-project

      Read this page for adding React with JSX to an existing project:
      https://react.dev/learn/add-react-to-an-existing-project
    -->
  </body>
</html>
```
> æ³¨æ„ï¼šâ€œbut it's not suitable for production.â€

### å…¶å®ƒ

â€œå¯åŠ¨ä¸€ä¸ªæ–°çš„ React é¡¹ç›®â€ã€â€œæ·»åŠ  React åˆ°ä¸€ä¸ªå·²æœ‰é¡¹ç›®â€è§ä¸‹é¢è¯´æ˜

## å¯åŠ¨ä¸€ä¸ªæ–°çš„ React é¡¹ç›®

https://ggzh-hans.react.dev/learn/start-a-new-react-project

React å®˜æ–¹å»ºè®®ï¼šå¦‚æœè¦åˆ›å»ºä¸€ä¸ª React æ–°é¡¹ç›®ï¼Œå»ºè®®ç›´æ¥ä½¿ç”¨æ¡†æ¶

ç”Ÿäº§çº§ React æ¡†æ¶æ¨èå¦‚ä¸‹ï¼š
- Next.js
- Remix
- Gatsby
- Expo(åŸç”Ÿåº”ç”¨)
- Bleeding-edge React Frameworks
- Next.js(App Router)

## æ·»åŠ  React åˆ°ä¸€ä¸ªå·²æœ‰é¡¹ç›®

https://zh-hans.react.dev/learn/add-react-to-an-existing-project

> å¦‚æœæƒ³å¯¹ç°æœ‰é¡¹ç›®æ·»åŠ ä¸€äº›äº¤äº’ï¼Œä¸å¿…ä½¿ç”¨ React å°†å…¶æ•´ä¸ªé‡å†™ã€‚åªéœ€å°† React æ·»åŠ åˆ°å·²æœ‰æŠ€æœ¯æ ˆä¸­ï¼Œå°±å¯ä»¥åœ¨ä»»ä½•ä½ç½®æ¸²æŸ“äº¤äº’å¼çš„ React ç»„ä»¶ã€‚

### åœ¨ç°æœ‰ç½‘ç«™çš„å­è·¯ç”±ä¸­ä½¿ç”¨ React

åœºæ™¯ï¼š`example.com` æ˜¯ç”¨å…¶å®ƒæŠ€æœ¯æ„å»ºçš„ Web åº”ç”¨ï¼Œä½†ä½ åˆæƒ³åœ¨ `example.com/some-app/` éƒ¨ç½²ä¸€ä¸ª React é¡¹ç›®

æ¨èçš„åšæ³•ï¼š
1. ä½¿ç”¨ä¸€ä¸ª åŸºäº React çš„æ¡†æ¶ æ„å»º åº”ç”¨çš„ React éƒ¨åˆ†
2. åœ¨æ¡†æ¶é…ç½®ä¸­å°† `/some-app` æŒ‡å®šä¸ºåŸºæœ¬è·¯å¾„
3. é…ç½®æœåŠ¡å™¨æˆ–ä»£ç†ï¼Œä»¥ä¾¿æ‰€æœ‰ä½äº `/some-app/` ä¸‹çš„è¯·æ±‚éƒ½ç”± React åº”ç”¨å¤„ç†

### åœ¨ç°æœ‰é¡µé¢çš„ä¸€éƒ¨åˆ†ä¸­ä½¿ç”¨ React

åœºæ™¯ï¼šæƒ³è¦åœ¨è¯¥é¡µé¢çš„æŸä¸ªä½ç½®æ¸²æŸ“äº¤äº’å¼çš„ React ç»„ä»¶

åˆ†ä¸¤æ­¥è¿›è¡Œï¼š
1. é…ç½® JavaScript ç¯å¢ƒï¼Œä»¥ä¾¿ä½¿ç”¨ JSX è¯­æ³•ã€import å’Œ export è¯­æ³•å°†ä»£ç æ‹†åˆ†ä¸ºæ¨¡å—ï¼Œä»¥åŠä» npm åŒ…æ³¨å†Œè¡¨ä¸­ä½¿ç”¨åŒ…ï¼ˆä¾‹å¦‚ Reactï¼‰
2. åœ¨éœ€è¦çš„ä½ç½®æ¸²æŸ“ React ç»„ä»¶

#### æ­¥éª¤ 1ï¼šé…ç½®æ¨¡å—åŒ–çš„ JS ç¯å¢ƒ

> æ¨¡å—åŒ–çš„ JavaScript ç¯å¢ƒå¯ä»¥è®©ä½ åœ¨å•ä¸€çš„æ–‡ä»¶ä¸­ç¼–å†™ React ç»„ä»¶ï¼Œè€Œä¸æ˜¯åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ç¼–å†™æ‰€æœ‰çš„ä»£ç ã€‚å®ƒè¿˜å¯ä»¥è®©ä½ ä½¿ç”¨å…¶ä»–å¼€å‘äººå‘˜åœ¨ npm æ³¨å†Œè¡¨ä¸Šå‘å¸ƒçš„ä¸€äº›ç‰¹åˆ«å¥½ç”¨çš„åŒ…ï¼ŒåŒ…æ‹¬ Reactï¼

- **å¦‚æœä½ çš„åº”ç”¨å·²ç»ä½¿ç”¨ import è¯­å¥æ¥åˆ†å‰²æˆä¸åŒçš„æ–‡ä»¶ï¼Œè¯·å°è¯•åˆ©ç”¨å·²æœ‰çš„é…ç½®**ï¼šæ£€æŸ¥ `<div />` æ˜¯å¦ä¼šå¯¼è‡´è¯­æ³•é”™è¯¯ï¼Œå¦‚æœæœ‰æŠ¥é”™ï¼Œå¯èƒ½éœ€è¦ Babel æ¥è½¬æ¢ä½ çš„ JS ä»£ç ï¼Œå¹¶å¯ç”¨ [Babel React preset](https://babeljs.io/docs/babel-preset-react) æ¥ä½¿ç”¨ JSX
- **å¦‚æœä½ çš„åº”ç”¨æ²¡æœ‰ç”¨äºç¼–è¯‘ JavaScript æ¨¡å—çš„é…ç½®ï¼Œè¯·ä½¿ç”¨ Vite è¿›è¡Œé…ç½®**ï¼šVite ç¤¾åŒºç»´æŠ¤äº†ä¸åç«¯æ¡†æ¶ï¼ˆåŒ…æ‹¬ Railsã€Django å’Œ Laravelï¼‰çš„ [è®¸å¤šé›†æˆé¡¹ç›®](https://github.com/vitejs/awesome-vite#integrations-with-backends)ã€‚

ç®€å•æ¥è¯´ï¼Œå°±æ˜¯ç»™ React é…ç½®ç¯å¢ƒï½

æ£€æŸ¥é…ç½®æ˜¯å¦ç”Ÿæ•ˆï¼š

æ‰§è¡Œå‘½ä»¤ï¼š

```sh
npm install react react-dom
```

ç„¶ååœ¨ä½ çš„ JavaScript ä¸»æ–‡ä»¶ï¼ˆå®ƒå¯èƒ½è¢«ç§°ä¸º index.js æˆ– main.jsï¼‰çš„é¡¶éƒ¨æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š

```jsx
import { createRoot } from 'react-dom/client';

// æ¸…é™¤ç°æœ‰çš„ HTML å†…å®¹
document.body.innerHTML = '<div id="app"></div>';

// æ¸²æŸ“ä½ çš„ React ç»„ä»¶
const root = createRoot(document.getElementById('app'));
root.render(<h1>Hello, world</h1>);
```

å¦‚æœé¡µé¢çš„å…¨éƒ¨å†…å®¹éƒ½è¢«æ›¿æ¢ä¸ºâ€œHello, world!â€ï¼Œåˆ™ä¸€åˆ‡æ­£å¸¸ï¼

#### æ­¥éª¤ 2ï¼šåœ¨é¡µé¢çš„ä»»ä½•ä½ç½®æ¸²æŸ“ React ç»„ä»¶

åœ¨ä¸Šä¸€æ­¥ä¸­ï¼Œæˆ‘ä»¬æŒ‰æ£€æŸ¥æ­¥éª¤æ¸…ç©ºäº†æ•´ä¸ªé¡µé¢ï¼Œå®é™…ä¸Šä½ å¹¶ä¸æƒ³ï¼Œåªæ˜¯æƒ³åœ¨ HTML ç‰¹å®šä½ç½®æ¸²æŸ“ React ç»„ä»¶ï¼Œé‚£ä¹ˆå¯ä»¥å‘ä»»æ„æ ‡ç­¾åŠ ä¸ª idï¼Œç„¶åå¯ä»¥ä½¿ç”¨ `document.getElementById` æŸ¥æ‰¾åˆ°è¯¥ HTML å…ƒç´ ï¼Œå¹¶å°†å…¶ä¼ é€’ç»™ `createRoot`ï¼Œä»¥ä¾¿å¯ä»¥åœ¨å…¶ä¸­æ¸²æŸ“è‡ªå·±çš„ React ç»„ä»¶ï¼š

index.htmlï¼š

```html
<!-- ... ä½ çš„ HTML ä»£ç æŸå¤„ ... -->
<nav id="navigation"></nav>
<!-- ... å…¶ä»– HTML ä»£ç  ... -->
```

index.jsï¼š

```jsx
import { createRoot } from 'react-dom/client';

function NavigationBar() {
  // TODO: å®é™…å®ç°ä¸€ä¸ªå¯¼èˆªæ 
  return <h1>Hello from React!</h1>;
}

const domNode = document.getElementById('navigation');
const root = createRoot(domNode);
root.render(<NavigationBar />);
```

> å½“åœ¨ç°æœ‰é¡¹ç›®ä¸­é‡‡ç”¨ React æ—¶ï¼Œé€šå¸¸ä¼šä»å°å‹äº¤äº’å¼ç»„ä»¶ï¼ˆä¾‹å¦‚æŒ‰é’®ï¼‰å¼€å§‹ï¼Œç„¶åé€æ¸â€œå‘ä¸Šç§»åŠ¨â€ï¼Œç›´åˆ°æœ€ç»ˆæ•´ä¸ªé¡µé¢éƒ½ç”± React æ„å»ºã€‚

### åœ¨ç°æœ‰çš„åŸç”Ÿç§»åŠ¨åº”ç”¨ä¸­ä½¿ç”¨ React Native

React Native ä¹Ÿå¯ä»¥é€æ­¥é›†æˆåˆ°ç°æœ‰çš„åŸç”Ÿåº”ç”¨ä¸­ã€‚å¦‚æœå·²ç»æœ‰ä¸€ä¸ªç°æœ‰çš„ Androidï¼ˆJava æˆ– Kotlinï¼‰æˆ– iOSï¼ˆObjective-C æˆ– Swiftï¼‰åŸç”Ÿåº”ç”¨ï¼Œå¯ä»¥å‚è€ƒè¯¥ [æŒ‡å—](https://reactnative.dev/docs/integration-with-existing-apps) å°† React Native æ·»åŠ åˆ°å…¶ä¸­ã€‚

## ç¼–è¾‘å™¨é…ç½®

React ç¤¾åŒºè¾ƒä¸ºæµè¡Œçš„æ–‡æœ¬ç¼–è¾‘å™¨ï¼š
- VSCode
- WebStorm
- Sublime Text
- Vim

æ¨èçš„æ–‡æœ¬ç¼–è¾‘å™¨åŠŸèƒ½ï¼š
- ä»£ç æ£€æŸ¥ï¼ˆLintingï¼‰
  - VSCode å®‰è£… [ESLint æ‰©å±•](https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint)
  - å®‰è£… React æ¨è ESLint é…ç½®ï¼š[eslint-config-react-app](https://www.npmjs.com/package/eslint-config-react-app)
- æ ¼å¼åŒ–
  - ä½¿ç”¨ [Prettier](https://prettier.io/) æ ¼å¼åŒ–ä»£ç 
- ä¿å­˜å¹¶è‡ªåŠ¨æ ¼å¼åŒ–

> æç¤ºï¼šè¯·ç¡®ä¿ä½ å·²ç»ä¸ºä½ çš„é¡¹ç›®å¯ç”¨äº† `eslint-plugin-react-hooks` è§„åˆ™ã€‚è¿™åœ¨ React é¡¹ç›®ä¸­æ˜¯å¿…å¤‡çš„ï¼ŒåŒæ—¶èƒ½å¸®åŠ©ä½ åŠæ—©çš„æ•è·è¾ƒä¸ºä¸¥é‡çš„ bugã€‚

## ä½¿ç”¨ TypeScript

å®‰è£…æœ€æ–°ç‰ˆæœ¬çš„ React ç±»å‹å®šä¹‰ï¼š

```sh
npm install @types/react @types/react-dom
```

> æ³¨æ„ï¼šæ¯ä¸ªåŒ…å« JSX çš„æ–‡ä»¶éƒ½å¿…é¡»ä½¿ç”¨ `.tsx` æ–‡ä»¶æ‰©å±•å

ç¤ºä¾‹ï¼š

```tsx
function MyButton({ title }: { title: string }) {
  return (
    <button>{title}</button>
  );
}

export default function MyApp() {
  return (
    <div>
      <h1>æ¬¢è¿æ¥åˆ°æˆ‘çš„åº”ç”¨</h1>
      <MyButton title="æˆ‘æ˜¯ä¸€ä¸ªæŒ‰é’®" />
    </div>
  );
}
```

å¯ä»¥ç”¨ `interface` æˆ– `type` æ¥æè¿°ç»„ä»¶çš„ propsï¼š

App.tsxï¼š

```tsx
interface MyButtonProps {
  /** æŒ‰é’®æ–‡å­— */
  title: string;
  /** æŒ‰é’®æ˜¯å¦ç¦ç”¨ */
  disabled: boolean;
}

function MyButton({ title, disabled }: MyButtonProps) {
  return (
    <button disabled={disabled}>{title}</button>
  );
}

export default function MyApp() {
  return (
    <div>
      <h1>Welcome to my app</h1>
      <MyButton title="æˆ‘æ˜¯ä¸€ä¸ªç¦ç”¨æŒ‰é’®" disabled={true}/>
    </div>
  );
}
```

æƒ³äº†è§£æ›´å¤šè¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£æˆ–ä¸‹æ–¹å‚è€ƒé“¾æ¥ï½

## React å¼€å‘è€…å·¥å…·

https://zh-hans.react.dev/learn/react-developer-tools

å®‰è£… Chrome æ‰©å±•ï¼š[React Developer Tools](https://chromewebstore.google.com/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi?hl=en&pli=1)

## å…¨æ ˆæ¶æ„æ„¿æ™¯

https://zh-hans.react.dev/learn/start-a-new-react-project#which-features-make-up-the-react-teams-full-stack-architecture-vision

> Next.js çš„ App Router æ˜¯å¯¹ Next.js API çš„é‡æ–°è®¾è®¡ï¼Œæ—¨åœ¨å®ç° React å›¢é˜Ÿçš„å…¨æ ˆæ¶æ„æ„¿æ™¯ã€‚å®ƒè®©ä½ åœ¨å¼‚æ­¥ç»„ä»¶ä¸­è·å–æ•°æ®ï¼Œè¿™äº›ç»„ä»¶ç”šè‡³èƒ½åœ¨æœåŠ¡ç«¯æ„å»ºè¿‡ç¨‹ä¸­è¿è¡Œã€‚
> 
> Next.js ç”± Vercel ç»´æŠ¤ã€‚ä½ å¯ä»¥å°† Next.js åº”ç”¨ éƒ¨ç½²åˆ° Node.js æˆ– serverless ä¸»æœºä¸Šï¼Œæˆ–éƒ¨ç½²åˆ°ä½ è‡ªå·±çš„æœåŠ¡å™¨ä¸Šã€‚Next.js è¿˜æ”¯æŒ é™æ€å¯¼å‡ºï¼Œä¸éœ€è¦æœåŠ¡å™¨ã€‚

## React å“²å­¦

https://zh-hans.react.dev/learn/thinking-in-react

### æ¦‚è¿°

> âœ¨ React å¯ä»¥æ”¹å˜ä½ å¯¹å¯è§è®¾è®¡å’Œåº”ç”¨æ„å»ºçš„æ€è€ƒã€‚å½“ä½ ä½¿ç”¨ React æ„å»ºç”¨æˆ·ç•Œé¢æ—¶ï¼Œä½ é¦–å…ˆä¼šæŠŠå®ƒåˆ†è§£æˆä¸€ä¸ªä¸ª ç»„ä»¶ï¼Œç„¶åï¼Œä½ éœ€è¦æŠŠè¿™äº›ç»„ä»¶è¿æ¥åœ¨ä¸€èµ·ï¼Œä½¿æ•°æ®æµç»å®ƒä»¬ã€‚

### ä»åŸå‹å¼€å§‹

è®¾è®¡è€…ç»™ä½ çš„ JSON API æ•°æ®å’ŒåŸå‹ï¼š

![](https://s1.mintiny.com/bhtc328/i/2024/02/19/qhto.png)

æ¥ä¸‹æ¥ï¼Œä½¿ç”¨ React å®ç°å®ƒï½

### æ­¥éª¤ 1ï¼šå°† UI æ‹†è§£ä¸ºç»„ä»¶å±‚çº§ç»“æ„

ä¸€ä¸ªç»„ä»¶ç†æƒ³æƒ…å†µä¸‹åº”ä»…åšä¸€ä»¶äº‹æƒ…

> å‚è€ƒï¼š[å•ä¸€è´£ä»»åŸåˆ™](https://en.wikipedia.org/wiki/Single_responsibility_principle)

![](https://s1.mintiny.com/bhtc328/i/2024/02/19/56r1j.png)

### æ­¥éª¤ 2ï¼šä½¿ç”¨ React æ„å»ºä¸€ä¸ªé™æ€ç‰ˆæœ¬

æ„å»ºåº”ç”¨ç¨‹åºçš„é™æ€ç‰ˆæœ¬æ¥æ¸²æŸ“ä½ çš„æ•°æ®æ¨¡å‹ï¼šæ„å»ºç»„ä»¶å¹¶å¤ç”¨å…¶å®ƒç»„ä»¶ï¼Œç„¶åä½¿ç”¨ props æ¥è¿›è¡Œä¼ é€’æ•°æ®

Props æ˜¯ä»çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ é€’æ•°æ®çš„ä¸€ç§æ–¹å¼

> åœ¨ç®€å•çš„ä¾‹å­ä¸­ï¼Œè‡ªä¸Šè€Œä¸‹æ„å»ºé€šå¸¸æ›´ç®€å•ï¼›è€Œåœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œè‡ªä¸‹è€Œä¸Šæ„å»ºæ›´ç®€å•ã€‚

> å•å‘æ•°æ®æµï¼šå› ä¸ºæ•°æ®ä»æ ‘çš„é¡¶å±‚ç»„ä»¶ä¼ é€’åˆ°ä¸‹é¢çš„ç»„ä»¶ã€‚

ç¤ºä¾‹ä»£ç ï¼š

```jsx
function ProductCategoryRow({ category }) {
  return (
    <tr>
      <th colSpan="2">
        {category}
      </th>
    </tr>
  );
}

function ProductRow({ product }) {
  const name = product.stocked ? product.name :
    <span style={{ color: 'red' }}>
      {product.name}
    </span>;

  return (
    <tr>
      <td>{name}</td>
      <td>{product.price}</td>
    </tr>
  );
}

function ProductTable({ products }) {
  const rows = [];
  let lastCategory = null;

  products.forEach((product) => {
    if (product.category !== lastCategory) {
      rows.push(
        <ProductCategoryRow
          category={product.category}
          key={product.category} />
      );
    }
    rows.push(
      <ProductRow
        product={product}
        key={product.name} />
    );
    lastCategory = product.category;
  });

  return (
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Price</th>
        </tr>
      </thead>
      <tbody>{rows}</tbody>
    </table>
  );
}

function SearchBar() {
  return (
    <form>
      <input type="text" placeholder="Search..." />
      <label>
        <input type="checkbox" />
        {' '}
        Only show products in stock
      </label>
    </form>
  );
}

function FilterableProductTable({ products }) {
  return (
    <div>
      <SearchBar />
      <ProductTable products={products} />
    </div>
  );
}

const PRODUCTS = [
  {category: "Fruits", price: "$1", stocked: true, name: "Apple"},
  {category: "Fruits", price: "$1", stocked: true, name: "Dragonfruit"},
  {category: "Fruits", price: "$2", stocked: false, name: "Passionfruit"},
  {category: "Vegetables", price: "$2", stocked: true, name: "Spinach"},
  {category: "Vegetables", price: "$4", stocked: false, name: "Pumpkin"},
  {category: "Vegetables", price: "$1", stocked: true, name: "Peas"}
];

export default function App() {
  return <FilterableProductTable products={PRODUCTS} />;
}
```

### æ­¥éª¤ 3ï¼šæ‰¾å‡º UI ç²¾ç®€ä¸”å®Œæ•´çš„ state è¡¨ç¤º

ä¸ºäº†ä½¿ UI å¯äº¤äº’ï¼Œå³ç”¨æˆ·å¯ä»¥ä¿®æ”¹æ•°æ®ç»“æ„ï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨ state æ¥è¿›è¡Œå®ç°

å…³äº stateï¼š
- state åº”è¯¥ä½œä¸ºåº”ç”¨ç¨‹åºçš„æœ€å°æ•°æ®é›†åˆ
- ç»„ç»‡ state æœ€é‡è¦çš„ä¸€æ¡åŸåˆ™æ˜¯ä¿æŒå®ƒ [DRYï¼ˆä¸è¦è‡ªæˆ‘é‡å¤ï¼‰](https://en.wikipedia.org/wiki/Don%27t_repeat_yourself)

ä¸æ˜¯ state ç¤ºä¾‹ï¼š
- éšç€æ—¶é—´æ¨ç§» ä¿æŒä¸å˜ï¼Ÿâ€”â€” ä¸æ˜¯ state
- é€šè¿‡ props ä»çˆ¶ç»„ä»¶ä¼ é€’ â€”â€” ä¸æ˜¯ state
- æ˜¯å¦å¯ä»¥åŸºäºå·²å­˜åœ¨äºç»„ä»¶ä¸­çš„ state æˆ–è€… props è¿›è¡Œè®¡ç®—ï¼Ÿâ€”â€” ä¸æ˜¯ state

å…³äº state å’Œ props çš„æ¯”è¾ƒï¼š
- prop åƒæ˜¯ä½ ä¼ é€’çš„å‚æ•°
- state åƒæ˜¯ç»„ä»¶çš„å†…å­˜

### æ­¥éª¤ 4ï¼šéªŒè¯ state åº”è¯¥è¢«æ”¾ç½®åœ¨å“ªé‡Œ

é‚£ä¹ˆï¼Œstate åº”è¯¥æ”¾åœ¨å“ªé‡Œï¼Ÿ

> è®°ä½ï¼šReact ä½¿ç”¨å•å‘æ•°æ®æµ

ä¸ºä½ åº”ç”¨ç¨‹åºä¸­çš„æ¯ä¸€ä¸ª state:
- **éªŒè¯æ¯ä¸€ä¸ªåŸºäºç‰¹å®š state æ¸²æŸ“çš„ç»„ä»¶**ï¼šå“ªäº›ç»„ä»¶ä½¿ç”¨äº†å“ªäº› state
- **å¯»æ‰¾å®ƒä»¬æœ€è¿‘å¹¶ä¸”å…±åŒçš„çˆ¶ç»„ä»¶**ï¼šåœ¨å±‚çº§ç»“æ„ä¸­ï¼Œä¸€ä¸ªå‡Œé©¾äºå®ƒä»¬æ‰€æœ‰ç»„ä»¶ä¹‹ä¸Šçš„ç»„ä»¶
- **å†³å®š state åº”è¯¥è¢«æ”¾ç½®äºå“ªé‡Œ**ï¼š
  - é€šå¸¸æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥ç›´æ¥æ”¾ç½® state äºå®ƒä»¬å…±åŒçš„çˆ¶ç»„ä»¶
  - ä½ ä¹Ÿå¯ä»¥å°† state æ”¾ç½®äºå®ƒä»¬çˆ¶ç»„ä»¶ä¸Šå±‚çš„ç»„ä»¶
  - å¦‚æœä½ æ‰¾ä¸åˆ°ä¸€ä¸ªæœ‰æ„ä¹‰æ‹¥æœ‰è¿™ä¸ª state çš„åœ°æ–¹ï¼Œå•ç‹¬åˆ›å»ºä¸€ä¸ªæ–°çš„ç»„ä»¶å»ç®¡ç†è¿™ä¸ª stateï¼Œå¹¶å°†å®ƒæ·»åŠ åˆ°å®ƒä»¬çˆ¶ç»„ä»¶ä¸Šå±‚çš„æŸä¸ªåœ°æ–¹

ç”¨ [useState() Hook](https://zh-hans.react.dev/reference/react/useState) ä¸ºç»„ä»¶æ·»åŠ  stateï¼ŒHook å¯ä»¥â€œé’©ä½â€ç»„ä»¶çš„ [æ¸²æŸ“å‘¨æœŸ](https://zh-hans.react.dev/learn/render-and-commit)

### æ­¥éª¤ 5ï¼šæ·»åŠ åå‘æ•°æ®æµ

ç°åœ¨åº”ç”¨ç¨‹åºå¯ä»¥å¸¦ç€ props å’Œ state éšç€å±‚çº§ç»“æ„è¿›è¡Œæ­£ç¡®æ¸²æŸ“ï¼Œä½†æ˜¯æ ¹æ®ç”¨æˆ·çš„è¾“å…¥æ”¹å˜ stateï¼Œéœ€è¦é€šè¿‡å…¶å®ƒçš„æ–¹å¼æ”¯æŒæ•°æ®æµï¼šæ·±å±‚ç»“æ„çš„è¡¨å•ç»„ä»¶éœ€è¦åœ¨ FilterableProductTable ä¸­æ›´æ–° stateã€‚

å®Œæ•´ç¤ºä¾‹ï¼š

```jsx
import { useState } from 'react';

function FilterableProductTable({ products }) {
  const [filterText, setFilterText] = useState('');
  const [inStockOnly, setInStockOnly] = useState(false);

  return (
    <div>
      <SearchBar
        filterText={filterText}
        inStockOnly={inStockOnly}
        onFilterTextChange={setFilterText}
        onInStockOnlyChange={setInStockOnly} />
      <ProductTable
        products={products}
        filterText={filterText}
        inStockOnly={inStockOnly} />
    </div>
  );
}

function ProductCategoryRow({ category }) {
  return (
    <tr>
      <th colSpan="2">
        {category}
      </th>
    </tr>
  );
}

function ProductRow({ product }) {
  const name = product.stocked ? product.name :
    <span style={{ color: 'red' }}>
      {product.name}
    </span>;

  return (
    <tr>
      <td>{name}</td>
      <td>{product.price}</td>
    </tr>
  );
}

function ProductTable({ products, filterText, inStockOnly }) {
  const rows = [];
  let lastCategory = null;

  products.forEach((product) => {
    if (
      product.name.toLowerCase().indexOf(
        filterText.toLowerCase()
      ) === -1
    ) {
      return;
    }
    if (inStockOnly && !product.stocked) {
      return;
    }
    if (product.category !== lastCategory) {
      rows.push(
        <ProductCategoryRow
          category={product.category}
          key={product.category} />
      );
    }
    rows.push(
      <ProductRow
        product={product}
        key={product.name} />
    );
    lastCategory = product.category;
  });

  return (
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Price</th>
        </tr>
      </thead>
      <tbody>{rows}</tbody>
    </table>
  );
}

function SearchBar({
  filterText,
  inStockOnly,
  onFilterTextChange,
  onInStockOnlyChange
}) {
  return (
    <form>
      <input
        type="text"
        value={filterText} placeholder="Search..."
        onChange={(e) => onFilterTextChange(e.target.value)} />
      <label>
        <input
          type="checkbox"
          checked={inStockOnly}
          onChange={(e) => onInStockOnlyChange(e.target.checked)} />
        {' '}
        Only show products in stock
      </label>
    </form>
  );
}

const PRODUCTS = [
  {category: "Fruits", price: "$1", stocked: true, name: "Apple"},
  {category: "Fruits", price: "$1", stocked: true, name: "Dragonfruit"},
  {category: "Fruits", price: "$2", stocked: false, name: "Passionfruit"},
  {category: "Vegetables", price: "$2", stocked: true, name: "Spinach"},
  {category: "Vegetables", price: "$4", stocked: false, name: "Pumpkin"},
  {category: "Vegetables", price: "$1", stocked: true, name: "Peas"}
];

export default function App() {
  return <FilterableProductTable products={PRODUCTS} />;
}
```

DEMOï¼šhttps://stackblitz.com/edit/vitejs-vite-avzb4l?file=src%2FApp.jsx

## å‚è€ƒ

- https://zh-hans.react.dev/learn/installation
- [TypeScript å®˜æ–¹æ–‡æ¡£](https://www.typescriptlang.org/docs/handbook/) â€œæ¶µç›–äº†å¤§å¤šæ•°å…³é”®çš„è¯­è¨€ç‰¹æ€§ã€‚â€
- [TypeScript å‘å¸ƒç¬”è®°](https://devblogs.microsoft.com/typescript/) â€œæ·±å…¥ä»‹ç»äº†æ¯ä¸€ä¸ªæ–°ç‰¹æ€§ã€‚â€
- [React TypeScript Cheatsheet](https://react-typescript-cheatsheet.netlify.app/) â€œä¸€ä¸ªç”±ç¤¾åŒºç»´æŠ¤çš„ï¼Œç”¨äºåœ¨ React ä¸­ä½¿ç”¨ TypeScript çš„é€ŸæŸ¥è¡¨ï¼Œæ¶µç›–äº†è®¸å¤šæœ‰ç”¨çš„è¾¹ç•Œæƒ…å†µï¼Œå¹¶æä¾›äº†æ¯”æœ¬æ–‡æ›´å¹¿æ³›å…¨é¢çš„å†…å®¹ã€‚â€